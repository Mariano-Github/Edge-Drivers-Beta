name: fibaro-metering-dimmer
components:
- id: main
  capabilities:
  - id: switch
    version: 1
  - id: switchLevel
    version: 1
  - id: powerMeter
    version: 1
  - id: energyMeter
    version: 1
  - id: legendabsolute60149.forcedOnLevel
    version: 1
  - id: refresh
    version: 1
  categories:
  - name: Switch
- id: button1
  capabilities:
  - id: button
    version: 1
  categories:
  - name: RemoteController
- id: button2
  capabilities:
  - id: button
    version: 1
  categories:
  - name: RemoteController
preferences:
  - name: "configChild"
    title: "Create Device Config-Association"
    description: "Create Child Device to see Fingerprints, Configure Parameters and Association Groups. NOTE: YOU MUST DELETE THE DEVICE AFTER PERFORMING THE CONFIGURATION"
    required: false
    preferenceType: boolean
    definition:
      default: false
  - name: "minimumLevel"
    title: "Minimum brightness level - 1"
    description: "This parameter 1 allows set Minimum brightness level % (1 to 98)"
    required: false
    preferenceType: number
    definition:
      minimum: 1
      maximum: 98
      default: 1
  - name: "maximumLevel"
    title: "Maximum brightness level - 2"
    description: "This parameter 2 allows set Maximum brightness level % (2 to 99)"
    required: false
    preferenceType: number
    definition:
      minimum: 2
      maximum: 99
      default: 99
  - name: "restoreState"
    title: "restore state - 9" 
    description: "This parameter 9 determines if the device will return to state prior to the power failure after power is restored"
    required: false
    preferenceType: enumeration
    definition:
      options:
        0: "power off after power failure"
        1: "restore state"
      default: 1
  - name: "autoOffTimer"
    title: "Auto Off Tmer - 10"
    description: "This parameter 10 allows to automatically switch off the device after specified time (0 disabled)"
    required: false
    preferenceType: number
    definition:
      minimum: 0
      maximum: 32767
      default: 0
  - name: "autoCalibration"
    title: "Force auto-calibration - 13"
    description: "Changing value of this parameter 13 will force the calibration process. During the calibration parameter is set to 1 or 2 and switched to 0 upon completion."
    required: false
    preferenceType: enumeration
    definition:
      options:
        0: "readout"
        1: "auto-calibration without FIB Bypass2"
        2: "auto-calibration with FIB Bypass 2"
      default: 0
  #- name: "forcedOnLevel"
  #  title: "Forced switch on level - 19"
  #  description: "If the parameter 19 is active, switching on the Dimmer 2 (S1 single click) will always set this brightness level %. (0 disabled)"
  #  required: false
  #  preferenceType: number
  #  definition:
  #    minimum: 0
  #    maximum: 99
  #    default: 0
  - name: "switchType"
    title: "switch type - 20"
    description: "Parameter 20 defines as what type the device should treat the switch connected to the S1 and S2 terminals"
    required: false
    preferenceType: enumeration
    definition:
      options:
        0: "momentary switch"
        1: "toggle sw. (ON/OFF)"
        2: "switches (S1 to brighten, S2 to dim)"
      default: 2
  - name: "toggleSwitchStatus"
    title: "Assign toggle switch status- 22"
    description: "This parameter 22 allow Assign toggle switch status to the device status"
    required: false
    preferenceType: enumeration
    definition:
      options:
        0: "Device changes status"
        1: "Device status synch to switch"
      default: 0
  - name: "doubleClickOption"
    title: "Double click option - 23"
    description: "This parameter 23 allow set the brightness level to MAX with double click"
    required: false
    preferenceType: enumeration
    definition:
      options:
        0: "Double click deactivated"
        1: "Double click activated"
      default: 1
  - name: "threeWaySwitch"
    title: "Function of 3-way switch  26"
    description: "This parameter 26 Switch no. 2 controls the Dimmer 2 additionally (in 3-way switch mode)"
    required: false
    preferenceType: enumeration
    definition:
      options:
        0: "3-way function for S2 disabled"
        1: "3-way function for S2 enabled"
      default: 0
  - name: "sceneActivation"
    title: "Scene activation - 28"
    description: "This parameter 28 SCENE ID depends on the switch type configurations."
    required: false
    preferenceType: enumeration
    definition:
      options:
        0: "deactivated"
        1: "activated"
      default: 0
  - name: "onOffMode"
    title: "ON-OFF Mode non-dimmable light - 32"
    description: "Parameter 32 This mode is necessary while connecting non-dimmable light sources."
    required: false
    preferenceType: enumeration
    definition:
      options:
        0: "on-off mode disabled"
        1: "on-off mode enabled"
        2: "selected automatically"
      default: 2
  - name: "activePowerReports"
    title: "Active power reports - 50"
    description: "The parameter 50 defines the power level change that will result in a new power report being sent. 0 power reports disabled, (1-100%) power report threshold"
    required: false
    preferenceType: number
    definition:
      minimum: 0
      maximum: 100
      default: 10
  - name: "periodicPowerReports"
    title: "periodic power reports - 52"
    description: "This parameter 52 defines in what time interval in sec the periodic power and energy reports are sent. 0 periodic reports disabled"
    required: false
    preferenceType: number
    definition:
      minimum: 0
      maximum: 32767
      default: 3600
  - name: "energyReports"
    title: "energy reports - 53"
    description: "This parameter 53 Energy level change which will result in sending a new energy report. 0-energy reports disabled. 1-255 (0.01-2.55 kWh)-report triggering threshold"
    required: false
    preferenceType: number
    definition:
      minimum: 0
      maximum: 255
      default: 10