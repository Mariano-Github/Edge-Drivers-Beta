name: tkb-rgbw-controller
components:
- id: main
  label: RGBW Controller
  capabilities:
  - id: switch
    version: 1
  - id: switchLevel
    version: 1
  - id: colorControl
    version: 1
  - id: refresh
    version: 1
  categories:
  - name: SmartPlug
- id: white
  label: White Color
  capabilities:
  - id: switch
    version: 1
  - id: switchLevel
    version: 1
  categories:
  - name: SmartPlug
- id: red
  label: Red Color
  capabilities:
  - id: switch
    version: 1
  - id: switchLevel
    version: 1
  categories:
  - name: SmartPlug
- id: green
  label: Green Color
  capabilities:
  - id: switch
    version: 1
  - id: switchLevel
    version: 1
  categories:
  - name: SmartPlug
- id: blue
  label: Blue Color
  capabilities:
  - id: switch
    version: 1
  - id: switchLevel
    version: 1
  categories:
  - name: SmartPlug
preferences:
  - name: "changeProfileTKB"
    title: "Select Tile Type"
    description: "Select Multi-Tile or Single-Tile Type:"
    required: false
    preferenceType: enumeration
    definition:
      options:
        "Multi" : "Multi-Tile Type"
        "Single": "Single-Tile Type"
      default: "Single"
  - name: "readRGBWDelay"
    title: "Set Read RGBW Values Delay"
    description: "Set Delay to Read RGBW values after command sent to device, in seconds (3 sec to 6 sec). Default: 4 sec"
    required: false
    preferenceType: number
    definition:
      minimum: 3
      maximum: 6
      default: 4
  - name: "whiteChild"
    title: "Create Single Device White Color"
    description: "Create Single Device to control White Color"
    required: false
    preferenceType: boolean
    definition:
      default: false
  - name: "rgbChild"
    title: "Create Single Devices R,G,B Colors"
    description: "Create Three Single Devices to control R,G,B Colors"
    required: false
    preferenceType: boolean
    definition:
      default: false
  - name: "indicatorState"
    title: "Indicator State- 1"
    description: "Select led Indicator State. Default: 1"
    required: false
    preferenceType: enumeration
    definition:
      options:
        0: "Led Off if switch off"
        1: "Led On if switch off"
      default: 1
  - name: "restoreState"
    title: "Restore state Memorized- 2"
    description: "After the power supply is back on, the Wall Plug can be restored to previous state or remain switched off. Default: 1"
    required: false
    preferenceType: enumeration
    definition:
      options:
        0: "device remains switched off"
        1: "device restores the state"
      default: 1
metadata:
  deviceType: Light
  ocfDeviceType: oic.d.light
  deviceTypeId: Light
deviceConfig:
  dashboard:
    states:
      - component: main
        capability: switch
        version: 1
        group: main
        composite: true
      - component: main
        capability: switchLevel
        version: 1
        group: main
        values:
          - label: " | {{level.value}}{{level.unit}}"
        composite: true
    actions:
      - component: main
        capability: switch
        version: 1
        group: main
        composite: true
    basicPlus: []
  detailView:
    - component: main
      capability: switch
      version: 1
    - component: main
      capability: switchLevel
      version: 1
    - component: main
      capability: colorControl
      version: 1
    - component: main
      capability: refresh
      version: 1
    - component: white
      capability: switch
      version: 1
    - component: white
      capability: switchLevel
      version: 1
    - component: red
      capability: switch
      version: 1
    - component: red
      capability: switchLevel
      version: 1
    - component: green
      capability: switch
      version: 1
    - component: green
      capability: switchLevel
      version: 1
    - component: blue
      capability: switch
      version: 1
    - component: blue
      capability: switchLevel
      version: 1
  automation:
    conditions:
      - component: main
        capability: switch
        version: 1
      - component: main
        capability: switchLevel
        version: 1
      - component: main
        capability: colorControl
        version: 1
      - component: white
        capability: switch
        version: 1
      - component: white
        capability: switchLevel
        version: 1
      - component: red
        capability: switch
        version: 1
      - component: red
        capability: switchLevel
        version: 1
      - component: green
        capability: switch
        version: 1
      - component: green
        capability: switchLevel
        version: 1
      - component: blue
        capability: switch
        version: 1
      - component: blue
        capability: switchLevel
        version: 1
    actions:
      - component: main
        capability: switch
        version: 1
      - component: main
        capability: switchLevel
        version: 1
      - component: main
        capability: colorControl
        version: 1
      - component: white
        capability: switch
        version: 1
      - component: white
        capability: switchLevel
        version: 1
      - component: red
        capability: switch
        version: 1
      - component: red
        capability: switchLevel
        version: 1
      - component: green
        capability: switch
        version: 1
      - component: green
        capability: switchLevel
        version: 1
      - component: blue
        capability: switch
        version: 1
      - component: blue
        capability: switchLevel
        version: 1